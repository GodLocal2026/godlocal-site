<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<title>GodLocal â€” MemeChat</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
  --bg:#07090e;--bg2:#0d1118;--bg3:#131a24;--border:#1b2433;
  --g:#00FF9D;--p:#6C5CE7;--r:#FF4B6E;--y:#F9CA24;--b:#00b4d8;
  --txt:#c5cee0;--dim:#4a5568;
}
html,body{height:100%;overflow:hidden;background:var(--bg);color:var(--txt);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif}
body{display:flex;flex-direction:column;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}

/* â”€â”€ TOP BAR â”€â”€ */
.topbar{display:flex;align-items:center;gap:8px;padding:10px 14px 8px;border-bottom:1px solid var(--border);flex-shrink:0;background:var(--bg)}
.logo{font-size:15px;font-weight:800;color:var(--g);letter-spacing:-.4px}
.live-dot{width:7px;height:7px;border-radius:50%;background:var(--g);box-shadow:0 0 10px var(--g);flex-shrink:0}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
.live-dot{animation:pulse 2.2s ease-in-out infinite}
.live-dot.dead{background:var(--r);box-shadow:0 0 10px var(--r);animation:none}
.bar-right{margin-left:auto;display:flex;gap:6px;align-items:center}
.market-tick{font-size:10px;color:var(--dim);max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.kill{padding:4px 9px;border-radius:6px;border:1px solid rgba(255,75,110,.4);color:var(--r);font-size:10px;font-weight:700;background:transparent;cursor:pointer}
.kill.on{background:var(--r);color:#fff;border-color:var(--r)}

/* â”€â”€ QUICK CHIPS â”€â”€ */
.chips{display:flex;gap:6px;padding:8px 12px;overflow-x:auto;scrollbar-width:none;flex-shrink:0;border-bottom:1px solid var(--border)}
.chips::-webkit-scrollbar{display:none}
.chip{white-space:nowrap;padding:5px 11px;border-radius:20px;font-size:12px;font-weight:600;cursor:pointer;border:1px solid var(--border);color:var(--dim);background:var(--bg2);transition:all .15s;flex-shrink:0}
.chip:active{transform:scale(.95)}
.chip.scan{border-color:rgba(0,255,157,.3);color:var(--g)}
.chip.sig{border-color:rgba(108,92,231,.3);color:var(--p)}
.chip.bag{border-color:rgba(0,180,216,.3);color:var(--b)}
.chip.hot{border-color:rgba(249,202,36,.3);color:var(--y)}
.chip.dive{border-color:rgba(255,75,110,.3);color:var(--r)}

/* â”€â”€ CHAT â”€â”€ */
.chat{flex:1;overflow-y:auto;overflow-x:hidden;padding:10px 12px 6px;display:flex;flex-direction:column;gap:10px;scrollbar-width:thin;scrollbar-color:var(--border) transparent}

/* message bubbles */
.msg{display:flex;flex-direction:column;gap:4px;max-width:100%}
.msg.user{align-items:flex-end}
.bubble{padding:9px 13px;border-radius:16px;font-size:13px;line-height:1.5;word-break:break-word}
.bubble.ai{background:var(--bg2);border:1px solid var(--border);border-radius:16px 16px 16px 4px;color:var(--txt)}
.bubble.user{background:rgba(108,92,231,.18);border:1px solid rgba(108,92,231,.28);border-radius:16px 16px 4px 16px;color:#c5bff8}
.bubble.typing{color:var(--dim)}
@keyframes blink{0%,80%,100%{opacity:0}40%{opacity:1}}
.dots span{animation:blink 1.4s infinite both}
.dots span:nth-child(2){animation-delay:.2s}
.dots span:nth-child(3){animation-delay:.4s}

/* token card inside bubble */
.tcard{background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:9px 11px;margin-top:6px}
.tcard+.tcard{margin-top:5px}
.tcard-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:6px}
.sym{font-weight:800;font-size:14px;color:#fff}
.name{font-size:10px;color:var(--dim);margin-top:1px;max-width:130px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.price-area{text-align:right}
.price{font-size:12px;font-weight:600;color:#fff}
.chg{font-size:11px;font-weight:700}
.chg.pos{color:var(--g)}.chg.neg{color:var(--r)}.chg.neu{color:var(--dim)}
.stats{display:flex;gap:10px;flex-wrap:wrap}
.s{display:flex;flex-direction:column}
.sl{font-size:9px;color:var(--dim);text-transform:uppercase}
.sv{font-size:11px;font-weight:600;color:var(--txt)}
.badge{display:inline-block;padding:1px 7px;border-radius:5px;font-size:10px;font-weight:700;margin-left:5px}
.b-buy{background:rgba(0,255,157,.12);color:var(--g);border:1px solid rgba(0,255,157,.25)}
.b-sell{background:rgba(255,75,110,.12);color:var(--r);border:1px solid rgba(255,75,110,.25)}
.b-watch{background:rgba(249,202,36,.08);color:var(--y);border:1px solid rgba(249,202,36,.2)}
.b-new{background:rgba(0,180,216,.08);color:var(--b);border:1px solid rgba(0,180,216,.2)}
.conv{height:2px;background:var(--border);border-radius:2px;margin-top:6px;overflow:hidden}
.conv-fill{height:100%;border-radius:2px;background:linear-gradient(90deg,var(--g),var(--b))}
.card-btns{display:flex;gap:5px;margin-top:7px}
.cb{padding:4px 9px;border-radius:7px;font-size:10px;font-weight:600;cursor:pointer;border:none}
.cb-g{background:rgba(0,255,157,.15);color:var(--g);border:1px solid rgba(0,255,157,.25)}
.cb-p{background:rgba(108,92,231,.15);color:var(--p);border:1px solid rgba(108,92,231,.25)}
.cb-r{background:rgba(255,75,110,.12);color:var(--r);border:1px solid rgba(255,75,110,.2)}

/* portfolio row inside bubble */
.prow{background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:8px 11px;margin-top:5px;display:flex;justify-content:space-between;align-items:center}
.pnl-pos{color:var(--g);font-weight:700}
.pnl-neg{color:var(--r);font-weight:700}

/* rug gauge */
.rug-bar{height:4px;background:var(--border);border-radius:3px;overflow:hidden;margin-top:4px}
.rug-fill{height:100%;border-radius:3px}

/* â”€â”€ INPUT ROW â”€â”€ */
.input-area{padding:8px 12px;padding-bottom:calc(8px + env(safe-area-inset-bottom));border-top:1px solid var(--border);background:var(--bg);flex-shrink:0}
.input-row{display:flex;gap:8px;align-items:flex-end}
.inp{flex:1;background:var(--bg2);border:1px solid var(--border);border-radius:14px;padding:10px 14px;color:#fff;font-size:14px;outline:none;resize:none;font-family:inherit;line-height:1.4;max-height:120px;transition:border .2s}
.inp:focus{border-color:var(--p)}
.inp::placeholder{color:var(--dim)}
.send-btn{background:var(--p);color:#fff;border:none;border-radius:12px;padding:10px 16px;font-size:18px;cursor:pointer;flex-shrink:0;line-height:1;transition:opacity .15s}
.send-btn:active{opacity:.7}

/* misc */
.section-lbl{font-size:10px;font-weight:700;color:var(--dim);text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}
@keyframes spin{to{transform:rotate(360deg)}}
.spin{display:inline-block;width:12px;height:12px;border:2px solid var(--border);border-top-color:var(--g);border-radius:50%;animation:spin .65s linear infinite;vertical-align:middle;margin-right:4px}
</style>
</head>
<body>

<!-- â”€â”€ TOP BAR â”€â”€ -->
<div class="topbar">
  <div class="live-dot" id="dot"></div>
  <span class="logo">SMERTCH âš¡</span>
  <span class="market-tick" id="ticker-scroll"></span>
  <div class="bar-right">
    <button class="kill" id="killBtn" onclick="toggleKill()">â˜  KILL</button>
  </div>
</div>

<!-- â”€â”€ QUICK CHIPS â”€â”€ -->
<div class="chips" id="chips">
  <div class="chip scan" onclick="cmd('ÑĞºĞ°Ğ½')">ğŸŒªï¸ Ğ¡ĞºĞ°Ğ½</div>
  <div class="chip sig"  onclick="cmd('ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹')">âš¡ Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ»Ñ‹</div>
  <div class="chip bag"  onclick="cmd('Ğ±Ğ°Ğ³')">ğŸ’¼ Ğ‘Ğ°Ğ³</div>
  <div class="chip hot"  onclick="cmd('Ğ³Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ')">ğŸ”¥ Ğ“Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ</div>
  <div class="chip dive" onclick="cmd('Ğ½Ğ¾Ğ²Ñ‹Ğµ')">ğŸ†• ĞĞ¾Ğ²Ñ‹Ğµ</div>
  <div class="chip"      onclick="cmd('ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ')">ğŸ§  Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ</div>
  <div class="chip"      onclick="cmd('Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ')">â“ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹</div>
</div>

<!-- â”€â”€ CHAT â”€â”€ -->
<div class="chat" id="chat"></div>

<!-- â”€â”€ INPUT â”€â”€ -->
<div class="input-area">
  <div class="input-row">
    <textarea class="inp" id="inp" rows="1" placeholder="Ğ¢Ğ¾ĞºĞµĞ½ / ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ / Ğ°Ğ´Ñ€ĞµÑ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚Ğ°â€¦"
      onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();send()}"
      oninput="this.style.height='auto';this.style.height=Math.min(this.scrollHeight,120)+'px'"></textarea>
    <button class="send-btn" onclick="send()">â†‘</button>
  </div>
</div>

<script>
'use strict';
const DEX='https://api.dexscreener.com';
const API='https://godlocal-api.onrender.com';
let killed=false, scanCache=[], portfolio=JSON.parse(localStorage.getItem('gl_portfolio')||'[]');

// â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const f$=v=>{if(!v||isNaN(v))return'â€“';if(v>=1e9)return'$'+(v/1e9).toFixed(2)+'B';if(v>=1e6)return'$'+(v/1e6).toFixed(2)+'M';if(v>=1e3)return'$'+(v/1e3).toFixed(1)+'K';return v>=0.01?'$'+v.toFixed(4):'$'+v.toExponential(2)};
const fAge=ms=>{const m=Math.floor(ms/60000);return m<60?m+'m':m<1440?Math.floor(m/60)+'h':Math.floor(m/1440)+'d'};
const clr=v=>v>0?'pos':v<0?'neg':'neu';
const cs=v=>v>0?'+'+v.toFixed(1)+'%':v.toFixed(1)+'%';

// â”€â”€ KILL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleKill(){
  killed=!killed;
  const b=document.getElementById('killBtn'), d=document.getElementById('dot');
  b.classList.toggle('on',killed); b.textContent=killed?'â˜  KILLED':'â˜  KILL';
  d.classList.toggle('dead',killed);
  if(killed) botMsg('â˜ ï¸ Kill Switch Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½. Ğ’ÑĞµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹.');
  else { botMsg('âœ… Kill Switch ÑĞ½ÑÑ‚. Ğ’Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³.'); setTimeout(runScan,300); }
}

// â”€â”€ CHAT HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function scrollBot(){const c=document.getElementById('chat');requestAnimationFrame(()=>c.scrollTop=c.scrollHeight);}

function userBubble(txt){
  const chat=document.getElementById('chat');
  const d=document.createElement('div'); d.className='msg user';
  d.innerHTML=`<div class="bubble user">${txt.replace(/</g,'&lt;')}</div>`;
  chat.appendChild(d); scrollBot();
}

function botMsg(html, extra=''){
  const chat=document.getElementById('chat');
  const d=document.createElement('div'); d.className='msg';
  d.innerHTML=`<div class="bubble ai">${html}</div>${extra}`;
  chat.appendChild(d); scrollBot(); return d;
}

function typingIndicator(){
  const chat=document.getElementById('chat');
  const d=document.createElement('div'); d.className='msg'; d.id='typing';
  d.innerHTML=`<div class="bubble ai typing"><div class="dots"><span>â—</span><span>â—</span><span>â—</span></div></div>`;
  chat.appendChild(d); scrollBot(); return d;
}

function removeTyping(){const t=document.getElementById('typing');if(t)t.remove();}

// â”€â”€ SIGNAL ENGINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function score(p){
  const c5=parseFloat(p.priceChange?.m5||0), c1=parseFloat(p.priceChange?.h1||0);
  const vol=p.volume?.h24||0, mcap=p.fdv||p.marketCap||0, liq=p.liquidity?.usd||0;
  const age=p.pairCreatedAt?Date.now()-p.pairCreatedAt:null;
  const buys=p.txns?.h24?.buys||0, sells=p.txns?.h24?.sells||0;
  let s=50;
  if(c5>5)s+=12; if(c5<-5)s-=18; if(c1>20)s+=18; if(c1<-20)s-=22;
  if(mcap>0){const r=vol/mcap;if(r>0.5)s+=15;if(r<0.05)s-=10;}
  if(liq<5000)s-=25; else if(liq>50000)s+=8;
  if(age&&age<2*3600000&&c5>0)s+=12;
  if(buys>sells*1.5)s+=10; if(sells>buys*2)s-=15;
  if(mcap>0&&mcap<500000)s+=12; if(mcap>5000000)s-=8;
  return Math.max(0,Math.min(100,Math.round(s)));
}
function sigType(s){return s>=68?'buy':s<=32?'sell':'watch';}

// â”€â”€ TOKEN CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function tokenCard(p, opts={}){
  const sym=p.baseToken?.symbol||'?', name=p.baseToken?.name||'';
  const price=parseFloat(p.priceUsd||0);
  const c5=parseFloat(p.priceChange?.m5||0), c1=parseFloat(p.priceChange?.h1||0);
  const vol=p.volume?.h24||0, mcap=p.fdv||p.marketCap||0, liq=p.liquidity?.usd||0;
  const age=p.pairCreatedAt?Date.now()-p.pairCreatedAt:null;
  const conv=score(p), st=sigType(conv);
  const isNew=age&&age<4*3600000;
  const addr=p.baseToken?.address||'';
  const dexUrl=p.url||'https://dexscreener.com/solana/'+(p.pairAddress||'');
  const badgeHtml=`<span class="badge b-${st}">${st==='buy'?'ğŸŸ¢ BUY':st==='sell'?'ğŸ”´ EXIT':'ğŸŸ¡ WATCH'}</span>${isNew?'<span class="badge b-new">NEW</span>':''}`;
  return `<div class="tcard">
    <div class="tcard-head">
      <div><div class="sym">${sym} ${badgeHtml}</div><div class="name">${name}</div></div>
      <div class="price-area"><div class="price">${f$(price)}</div><div class="chg ${clr(c1)}">${cs(c1)} 1h</div></div>
    </div>
    <div class="stats">
      <div class="s"><div class="sl">MCap</div><div class="sv">${f$(mcap)}</div></div>
      <div class="s"><div class="sl">Vol 24h</div><div class="sv">${f$(vol)}</div></div>
      <div class="s"><div class="sl">Ğ›Ğ¸ĞºĞ².</div><div class="sv">${f$(liq)}</div></div>
      ${age?`<div class="s"><div class="sl">Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚</div><div class="sv">${fAge(age)}</div></div>`:''}
      <div class="s"><div class="sl">5m</div><div class="sv chg ${clr(c5)}">${cs(c5)}</div></div>
    </div>
    <div class="conv"><div class="conv-fill" style="width:${conv}%;background:${st==='buy'?'var(--g)':st==='sell'?'var(--r)':'var(--y)'}"></div></div>
    <div class="card-btns">
      ${opts.enterBtn!==false?`<button class="cb cb-g" onclick="quickEnter('${addr}','${sym}')">+Ğ’Ğ¾Ğ¹Ñ‚Ğ¸</button>`:''}
      <button class="cb cb-p" onclick="cmd('Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· ${addr}')">ĞĞ½Ğ°Ğ»Ğ¸Ğ·</button>
      <a href="${dexUrl}" target="_blank" style="text-decoration:none"><button class="cb cb-p">DEX â†—</button></a>
      ${opts.closeBtn?`<button class="cb cb-r" onclick="closePos('${opts.posId}')">Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ</button>`:''}
    </div>
  </div>`;
}

// â”€â”€ COMMANDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function runScan(){
  if(killed) return;
  const t=typingIndicator();
  try{
    const [boostRes,profileRes]=await Promise.all([
      fetch(DEX+'/token-boosts/latest/v1').then(r=>r.json()).catch(()=>[]),
      fetch(DEX+'/token-profiles/latest/v1').then(r=>r.json()).catch(()=>[]),
    ]);
    const searchRes=await fetch(DEX+'/latest/dex/search?q=solana&rankBy=trendingScoreH6&order=desc').then(r=>r.json()).catch(()=>({pairs:[]}));
    const boosts=(Array.isArray(boostRes)?boostRes:[]).filter(b=>b.chainId==='solana').slice(0,10);
    const profiles=(Array.isArray(profileRes)?profileRes:[]).filter(b=>b.chainId==='solana').slice(0,8);
    const addrs=[...new Set([...boosts.map(b=>b.tokenAddress),...profiles.map(p=>p.tokenAddress)])].slice(0,14);
    let pairs=[];
    if(addrs.length){const r=await fetch(DEX+'/latest/dex/tokens/'+addrs.join(',')).then(x=>x.json());pairs=(r.pairs||[]).filter(p=>p.chainId==='solana');}
    const sp=(searchRes.pairs||[]).filter(p=>p.chainId==='solana').slice(0,8);
    const seen=new Set();
    const all=[...pairs,...sp].filter(p=>{const a=p.baseToken?.address;if(!a||seen.has(a))return false;seen.add(a);return true;});
    all.sort((a,b)=>score(b)-score(a));
    scanCache=all;
    removeTyping();
    if(!all.length){botMsg('âš ï¸ DexScreener Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ğ». ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ñ‡ĞµÑ€ĞµĞ· 30 ÑĞµĞº.');return;}
    // ticker scroll
    document.getElementById('ticker-scroll').textContent=all.slice(0,5).map(p=>`${p.baseToken?.symbol} ${parseFloat(p.priceChange?.h1||0)>0?'â–²':'â–¼'}${Math.abs(parseFloat(p.priceChange?.h1||0)).toFixed(0)}%`).join('  Â·  ');
    const top=all.slice(0,5);
    const buys=top.filter(p=>sigType(score(p))==='buy');
    const time=new Date().toLocaleTimeString('ru',{hour:'2-digit',minute:'2-digit'});
    let html=`ğŸŒªï¸ <b>Ğ¡ĞºĞ°Ğ½ ${time}</b> â€” ${all.length} Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Solana<br><span style="font-size:11px;color:var(--dim)">Ğ¢Ğ¾Ğ¿-5 Ğ¿Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñƒ:</span>`;
    removeTyping();
    const card=document.createElement('div'); card.className='msg';
    card.innerHTML=`<div class="bubble ai">${html}${top.map(p=>tokenCard(p)).join('')}</div>`;
    document.getElementById('chat').appendChild(card); scrollBot();
    if(buys.length) setTimeout(()=>botMsg(`ğŸ’¡ ${buys.length} Ñ‚Ğ¾ĞºĞµĞ½${buys.length>1?'Ğ°':''} Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ¼ BUY â€” Ğ½Ğ°Ğ¶Ğ¼Ğ¸ <b>+Ğ’Ğ¾Ğ¹Ñ‚Ğ¸</b> Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ`),400);
  }catch(e){removeTyping();botMsg('âš ï¸ ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞºĞ°Ğ½Ğ°: '+e.message);}
}

async function runSignals(){
  if(!scanCache.length){await runScan();return;}
  const buys=scanCache.filter(p=>sigType(score(p))==='buy').slice(0,4);
  const sells=scanCache.filter(p=>sigType(score(p))==='sell').slice(0,2);
  if(!buys.length&&!sells.length){botMsg('ĞĞµÑ‚ Ñ‡Ñ‘Ñ‚ĞºĞ¸Ñ… ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ. ĞĞ°Ğ¶Ğ¼Ğ¸ ğŸŒªï¸ Ğ¡ĞºĞ°Ğ½ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….');return;}
  const d=document.createElement('div'); d.className='msg';
  let html='';
  if(buys.length) html+=`<div class="section-lbl" style="color:var(--g)">ğŸŸ¢ ĞŸĞĞšĞ£ĞŸĞĞ™</div>${buys.map(p=>tokenCard(p)).join('')}`;
  if(sells.length) html+=`<div class="section-lbl" style="color:var(--r);margin-top:8px">ğŸ”´ Ğ¤Ğ˜ĞšĞ¡Ğ˜Ğ Ğ£Ğ™</div>${sells.map(p=>tokenCard(p)).join('')}`;
  d.innerHTML=`<div class="bubble ai">âš¡ <b>ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹</b><br>${html}</div>`;
  document.getElementById('chat').appendChild(d); scrollBot();
}

async function runHot(){
  const t=typingIndicator();
  try{
    const r=await fetch(DEX+'/token-boosts/latest/v1').then(x=>x.json());
    const boosts=(Array.isArray(r)?r:[]).filter(b=>b.chainId==='solana').slice(0,8);
    if(!boosts.length){removeTyping();botMsg('ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾ Ğ³Ğ¾Ñ€ÑÑ‡Ğ¸Ñ… Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ñ…');return;}
    const addrs=boosts.map(b=>b.tokenAddress).join(',');
    const r2=await fetch(DEX+'/latest/dex/tokens/'+addrs).then(x=>x.json());
    const pairs=(r2.pairs||[]).filter(p=>p.chainId==='solana');
    removeTyping();
    const d=document.createElement('div'); d.className='msg';
    d.innerHTML=`<div class="bubble ai">ğŸ”¥ <b>Ğ“Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹</b> (Ğ±ÑƒÑÑ‚ + Ñ‚Ñ€ĞµĞ½Ğ´)${pairs.slice(0,5).map(p=>tokenCard(p)).join('')}</div>`;
    document.getElementById('chat').appendChild(d); scrollBot();
  }catch(e){removeTyping();botMsg('âš ï¸ '+e.message);}
}

async function runNew(){
  const t=typingIndicator();
  try{
    const r=await fetch(DEX+'/latest/dex/search?q=solana&rankBy=trendingScoreH1&order=desc').then(x=>x.json());
    const pairs=(r.pairs||[]).filter(p=>{
      if(p.chainId!=='solana') return false;
      const age=p.pairCreatedAt?Date.now()-p.pairCreatedAt:null;
      return age&&age<6*3600000;
    }).slice(0,6);
    removeTyping();
    if(!pairs.length){botMsg('ĞĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ğ·Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 6 Ñ‡Ğ°ÑĞ¾Ğ²');return;}
    const d=document.createElement('div'); d.className='msg';
    d.innerHTML=`<div class="bubble ai">ğŸ†• <b>ĞĞ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ¸</b> (Ğ´Ğ¾ 6h)${pairs.map(p=>tokenCard(p)).join('')}</div>`;
    document.getElementById('chat').appendChild(d); scrollBot();
  }catch(e){removeTyping();botMsg('âš ï¸ '+e.message);}
}

async function runBag(){
  if(!portfolio.length){botMsg('ğŸ’¼ ĞŸĞ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ Ğ¿ÑƒÑÑ‚. ĞĞ°Ğ¶Ğ¼Ğ¸ <b>+Ğ’Ğ¾Ğ¹Ñ‚Ğ¸</b> Ğ½Ğ° Ğ»ÑĞ±Ğ¾Ğ¼ Ñ‚Ğ¾ĞºĞµĞ½Ğµ.');return;}
  const t=typingIndicator();
  try{
    const addrs=[...new Set(portfolio.map(p=>p.addr))];
    let priceMap={};
    const r=await fetch(DEX+'/latest/dex/tokens/'+addrs.join(',')).then(x=>x.json());
    for(const pair of (r.pairs||[])){const a=pair.baseToken?.address;if(a)priceMap[a]={price:parseFloat(pair.priceUsd||0),sym:pair.baseToken?.symbol||'?'};}
    removeTyping();
    let total=0,count=0;
    const rows=portfolio.map((pos,i)=>{
      const cur=priceMap[pos.addr]?.price||0;
      const sym=priceMap[pos.addr]?.sym||pos.sym||pos.addr.slice(0,6);
      const pnl=pos.entry>0?(cur-pos.entry)/pos.entry*100:0;
      total+=pnl; count++;
      return `<div class="prow">
        <div><b>${sym}</b><br><span style="font-size:10px;color:var(--dim)">Ğ’Ñ…Ğ¾Ğ´: ${pos.entry>0?f$(pos.entry):'?'} Â· ${pos.sol||0} SOL Â· ${fAge(Date.now()-pos.ts)}</span></div>
        <div style="text-align:right"><div class="${pnl>=0?'pnl-pos':'pnl-neg'}">${pnl>=0?'+':''}${pnl.toFixed(1)}%</div>
        <button class="cb cb-r" style="margin-top:3px;font-size:9px" onclick="closePos(${i})">Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ</button></div>
      </div>`;
    }).join('');
    const avg=count?total/count:0;
    const d=document.createElement('div'); d.className='msg';
    d.innerHTML=`<div class="bubble ai">ğŸ’¼ <b>ĞœĞ¾Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ</b> Â· avg <span class="${avg>=0?'pnl-pos':'pnl-neg'}">${avg>=0?'+':''}${avg.toFixed(1)}%</span>${rows}</div>`;
    document.getElementById('chat').appendChild(d); scrollBot();
  }catch(e){removeTyping();botMsg('âš ï¸ '+e.message);}
}

async function runAnalyze(addr){
  addr=addr.trim();
  const t=typingIndicator();
  try{
    const r=await fetch(DEX+'/latest/dex/tokens/'+addr).then(x=>x.json());
    const pairs=(r.pairs||[]).filter(p=>p.chainId==='solana');
    removeTyping();
    if(!pairs.length){botMsg('ğŸ” Ğ¢Ğ¾ĞºĞµĞ½ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ½Ğ° Solana. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ°Ğ´Ñ€ĞµÑ.');return;}
    const p=pairs[0];
    const sym=p.baseToken?.symbol||'?';
    const mcap=p.fdv||p.marketCap||0, liq=p.liquidity?.usd||0;
    const buys=p.txns?.h24?.buys||0, sells=p.txns?.h24?.sells||0;
    const age=p.pairCreatedAt?Date.now()-p.pairCreatedAt:null;
    const hasTg=!!p.info?.socials?.find(s=>s.type==='telegram');
    const hasTw=!!p.info?.socials?.find(s=>s.type==='twitter');
    const hasSite=!!p.info?.websites?.length;
    // Rug score
    let rug=0;
    if(liq<5000)rug+=30; else if(liq<20000)rug+=12;
    if(!hasTg&&!hasTw&&!hasSite)rug+=22;
    if(age&&age<1800000)rug+=15;
    if(buys<10)rug+=15; if(sells>buys*3)rug+=15;
    rug=Math.min(100,rug);
    const rugClr=rug>=70?'var(--r)':rug>=40?'var(--y)':'var(--g)';
    const rugLabel=rug>=70?'â›” Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™':rug>=40?'âš ï¸ Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™':'âœ… ĞĞ˜Ğ—ĞšĞ˜Ğ™';
    const bp=buys+sells>0?Math.round(buys/(buys+sells)*100):50;
    const conv=score(p), st=sigType(conv);
    const d=document.createElement('div'); d.className='msg';
    d.innerHTML=`<div class="bubble ai">
      ğŸ” <b>ĞĞ½Ğ°Ğ»Ğ¸Ğ· ${sym}</b> <span class="badge b-${st}">${st==='buy'?'ğŸŸ¢ BUY':st==='sell'?'ğŸ”´ EXIT':'ğŸŸ¡ WATCH'}</span>
      ${tokenCard(p,{enterBtn:true})}
      <div class="tcard" style="margin-top:5px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
          <span style="font-size:11px;color:var(--dim)">ğŸ›¡ Rug Risk</span>
          <b style="color:${rugClr}">${rug}/100 ${rugLabel}</b>
        </div>
        <div class="rug-bar"><div class="rug-fill" style="width:${rug}%;background:${rugClr}"></div></div>
        <div style="display:flex;gap:14px;margin-top:8px">
          <span style="font-size:11px">TG ${hasTg?'âœ…':'âŒ'}</span>
          <span style="font-size:11px">TW ${hasTw?'âœ…':'âŒ'}</span>
          <span style="font-size:11px">Ğ¡Ğ°Ğ¹Ñ‚ ${hasSite?'âœ…':'âŒ'}</span>
          <span style="font-size:11px">Buy% <b style="color:${bp>55?'var(--g)':'var(--r)'}">${bp}%</b></span>
        </div>
        <div style="font-size:11px;color:var(--dim);margin-top:6px">
          ${rug>=70?'Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ Ñ€Ğ¸ÑĞº rug pull.':rug>=40?'Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ€Ğ¸ÑĞº. ĞœĞ°Ğ»Ğ°Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ.':'ĞÑ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ñ‡Ğ¸ÑÑ‚Ğ¾ Ğ´Ğ»Ñ Ñ„Ğ»Ğ¸Ğ¿Ğ°.'}
        </div>
      </div>
    </div>`;
    document.getElementById('chat').appendChild(d); scrollBot();
    // Auto-ask AI opinion
    setTimeout(()=>askAI(`Ğ”Ğ°Ğ¹ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¼Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ${sym}: mcap=${f$(mcap)}, Ğ»Ğ¸ĞºĞ²Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ=${f$(liq)}, rug=${rug}/100, buy pressure=${bp}%, ÑĞ¸Ğ³Ğ½Ğ°Ğ»=${st}. Ğ¡Ñ‚Ğ¾Ğ¸Ñ‚ Ñ„Ğ»Ğ¸Ğ¿Ğ°Ñ‚ÑŒ?`),200);
  }catch(e){removeTyping();botMsg('âš ï¸ '+e.message);}
}

// â”€â”€ PORTFOLIO ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function quickEnter(addr, sym){
  portfolio.push({id:Date.now(),addr,sym,entry:0,sol:0,ts:Date.now()});
  localStorage.setItem('gl_portfolio',JSON.stringify(portfolio));
  botMsg(`âœ… <b>${sym}</b> Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ² Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ. Ğ’Ğ²ĞµĞ´Ğ¸ <i>Ğ±Ğ°Ğ³</i> Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸.<br><span style="font-size:11px;color:var(--dim)">Ğ¦ĞµĞ½Ñƒ Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ¸ SOL Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ÑŒ: <i>Ğ²Ñ…Ğ¾Ğ´ ${sym} 0.00001 0.5</i></span>`);
}

function closePos(i){
  if(i<0||i>=portfolio.length)return;
  const sym=portfolio[i].sym||'Ñ‚Ğ¾ĞºĞµĞ½';
  portfolio.splice(i,1);
  localStorage.setItem('gl_portfolio',JSON.stringify(portfolio));
  botMsg(`âŒ ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ <b>${sym}</b> Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ°.`);
}

// â”€â”€ AI CHAT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function askAI(question){
  const portCtx=portfolio.length?`\nĞœĞ¾Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ: ${portfolio.map(p=>p.sym||p.addr.slice(0,6)).join(', ')}.`:'';
  const prompt=`Ğ¢Ñ‹ AI ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾-ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³ Ğ´Ğ»Ñ Ñ„Ğ»Ğ¸Ğ¿Ğ¿Ğ¸Ğ½Ğ³Ğ° Ğ¼ĞµĞ¼ĞºĞ¾Ğ¹Ğ½Ğ¾Ğ² Ğ½Ğ° Solana. ĞÑ‚Ğ²ĞµÑ‡Ğ°Ğ¹ ĞºÑ€Ğ°Ñ‚ĞºĞ¾ Ğ¸ Ğ¿Ğ¾ Ğ´ĞµĞ»Ñƒ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸ ÑƒĞ¼ĞµÑ€ĞµĞ½Ğ½Ğ¾.${portCtx}\n\n${question}`;
  const t=typingIndicator();
  try{
    let reply='';
    await new Promise((resolve)=>{
      const ws=new WebSocket('wss://godlocal-api.onrender.com/ws/search');
      const timer=setTimeout(()=>{ws.close();resolve();},22000);
      ws.onopen=()=>ws.send(JSON.stringify({query:prompt,agent:'GodLocal'}));
      ws.onmessage=(e)=>{
        try{
          const d=JSON.parse(e.data);
          reply+=(d.data||d.token||'');
          if(d.type==='done'||d.done){clearTimeout(timer);ws.close();resolve();}
          if(t.querySelector('.bubble')) t.querySelector('.bubble').innerHTML=reply.replace(/</g,'&lt;').replace(/\n/g,'<br>')||'<div class="dots"><span>â—</span><span>â—</span><span>â—</span></div>';
        }catch(ex){reply+=e.data;}
      };
      ws.onerror=ws.onclose=()=>{clearTimeout(timer);resolve();};
    });
    removeTyping();
    botMsg(reply.replace(/</g,'&lt;').replace(/\n/g,'<br>')||'ĞĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¾Ñ‚ ÑĞµÑ€Ğ²ĞµÑ€Ğ°.');
  }catch(e){removeTyping();botMsg('âš ï¸ '+e.message);}
}

// â”€â”€ COMMAND ROUTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SOL_ADDR=/^[1-9A-HJ-NP-Za-km-z]{32,44}$/;

async function cmd(text){
  text=text.trim();
  const tl=text.toLowerCase();
  // Paste contract address
  if(SOL_ADDR.test(text)){await runAnalyze(text);return;}
  // "Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· <addr>"
  const analyzeMatch=tl.match(/^Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·\s+([1-9A-HJ-NP-Za-km-z]{32,44})/);
  if(analyzeMatch){await runAnalyze(analyzeMatch[1]);return;}
  // "Ğ²Ñ…Ğ¾Ğ´ SYM 0.00001 0.5"
  const enterMatch=tl.match(/^Ğ²Ñ…Ğ¾Ğ´\s+(\S+)\s+([\d.]+)\s+([\d.]+)/);
  if(enterMatch){
    const sym=enterMatch[1].toUpperCase();
    const entry=parseFloat(enterMatch[2]), sol=parseFloat(enterMatch[3]);
    const pos=portfolio.find(p=>p.sym?.toUpperCase()===sym);
    if(pos){pos.entry=entry;pos.sol=sol;localStorage.setItem('gl_portfolio',JSON.stringify(portfolio));botMsg(`âœ… ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ ${sym} Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°: Ğ²Ñ…Ğ¾Ğ´ ${f$(entry)}, ${sol} SOL`);}
    else{portfolio.push({id:Date.now(),addr:'',sym,entry,sol,ts:Date.now()});localStorage.setItem('gl_portfolio',JSON.stringify(portfolio));botMsg(`âœ… ${sym} Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½: Ğ²Ñ…Ğ¾Ğ´ ${f$(entry)}, ${sol} SOL`);}
    return;
  }
  // Commands
  if(tl==='ÑĞºĞ°Ğ½'||tl==='scan'){await runScan();return;}
  if(tl==='ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹'||tl==='signal'||tl==='signals'){await runSignals();return;}
  if(tl==='Ğ±Ğ°Ğ³'||tl==='bag'||tl==='Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ'){await runBag();return;}
  if(tl==='Ğ³Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ'||tl==='hot'){await runHot();return;}
  if(tl==='Ğ½Ğ¾Ğ²Ñ‹Ğµ'||tl==='new'||tl==='new launches'){await runNew();return;}
  if(tl==='Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ'||tl==='help'||tl==='ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹'){
    botMsg(`ğŸ“– <b>ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ SMERTCH</b><br><br>
ğŸŒªï¸ <b>ÑĞºĞ°Ğ½</b> â€” Ñ‚Ğ¾Ğ¿ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Solana<br>
âš¡ <b>ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹</b> â€” BUY/SELL ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹<br>
ğŸ’¼ <b>Ğ±Ğ°Ğ³</b> â€” Ğ¼Ğ¾Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ + PnL<br>
ğŸ”¥ <b>Ğ³Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ</b> â€” Ğ±ÑƒÑÑ‚-Ñ‚Ñ€ĞµĞ½Ğ´Ğ¸Ğ½Ğ³<br>
ğŸ†• <b>Ğ½Ğ¾Ğ²Ñ‹Ğµ</b> â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ¸ < 6h<br>
ğŸ” <b>[Ğ°Ğ´Ñ€ĞµÑ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚Ğ°]</b> â€” Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ‚Ğ¾ĞºĞµĞ½Ğ°<br>
ğŸ” <b>Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· [Ğ°Ğ´Ñ€ĞµÑ]</b> â€” Ñ‚Ğ¾ Ğ¶Ğµ<br>
â• <b>Ğ²Ñ…Ğ¾Ğ´ SYM 0.00001 0.5</b> â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ<br>
ğŸ§  <b>Ğ»ÑĞ±Ğ¾Ğ¹ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ</b> â€” AI ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³<br><br>
ĞĞ° Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½ â†’ <b>+Ğ’Ğ¾Ğ¹Ñ‚Ğ¸</b> Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ Ğ² Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ`);
    return;
  }
  if(tl==='ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ'||tl==='strategy'){
    await askAI('ĞšĞ°ĞºĞ¾Ğ²Ğ° Ğ»ÑƒÑ‡ÑˆĞ°Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ñ„Ğ»Ğ¸Ğ¿Ğ¿Ğ¸Ğ½Ğ³Ğ° Ğ¼ĞµĞ¼ĞºĞ¾Ğ¹Ğ½Ğ¾Ğ² Ğ½Ğ° Solana Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ? ĞšÑ€Ğ°Ñ‚ĞºĞ¾ â€” Ñ‚Ğ¾Ğ¿-5 Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ».');
    return;
  }
  // Everything else â†’ AI
  await askAI(text);
}

function send(){
  const inp=document.getElementById('inp');
  const text=inp.value.trim();
  if(!text)return;
  inp.value=''; inp.style.height='auto';
  userBubble(text);
  cmd(text);
}

// â”€â”€ AUTO SCAN TICKER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function refreshTicker(){
  if(killed||scanCache.length===0)return;
  document.getElementById('ticker-scroll').textContent=
    scanCache.slice(0,6).map(p=>`${p.baseToken?.symbol} ${parseFloat(p.priceChange?.h1||0)>0?'â–²':'â–¼'}${Math.abs(parseFloat(p.priceChange?.h1||0)).toFixed(0)}%`).join('  Â·  ');
}
setInterval(refreshTicker,60000);
setInterval(()=>{if(!killed)runScan();},120000);

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function init(){
  botMsg('ğŸ‘‹ <b>SMERTCH â€” Ğ¼ĞµĞ¼ĞºĞ¾Ğ¹Ğ½ Ñ„Ğ»Ğ¸Ğ¿Ğ¿ĞµÑ€</b><br>Ğ¡ĞºĞ°Ğ½ Ñ€Ñ‹Ğ½ĞºĞ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 2 Ğ¼Ğ¸Ğ½ Â· AI ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³ Â· Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ Â· rug Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·<br><span style="font-size:11px;color:var(--dim)">ĞĞ°Ğ¶Ğ¸Ğ¼Ğ°Ğ¹ Ñ‡Ğ¸Ğ¿Ñ‹ Ğ²Ñ‹ÑˆĞµ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¸ÑˆĞ¸ Ğ¿Ñ€ÑĞ¼Ğ¾</span>');
  setTimeout(()=>{botMsg('<div class="spin"></div> Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ Ñ€Ñ‹Ğ½Ğ¾Ğº Solanaâ€¦');runScan();},600);
})();
</script>
</body>
</html>